(function(g,b,n,h,o,r,a,S){"use strict";var u;const k=n.findByStoreName("GuildStore"),R=n.findByStoreName("UserSettingsProtoStore"),P=((u=n.findByProps("ActionSheet"))===null||u===void 0?void 0:u.ActionSheet)??n.find(function(c){var i;return(c==null||(i=c.render)===null||i===void 0?void 0:i.name)==="ActionSheet"}),{hideActionSheet:d}=n.findByProps("hideActionSheet"),{downloadMediaAsset:I}=n.findByProps("downloadMediaAsset"),p=n.findByProps("favoriteSticker","unfavoriteSticker"),s={marginBottom:10},_=b.before("render",P,function(c){let[i]=c;var v,f,m;const A=h.findInReactTree(i,function(t){return Array.isArray(t?.children)}),e=(v=h.findInReactTree(i,function(t){var y;return typeof t?.sticker=="object"&&(t==null||(y=t.sticker)===null||y===void 0?void 0:y.hasOwnProperty("guild_id"))}))===null||v===void 0?void 0:v.sticker,F=(m=R.frecencyWithoutFetchingLatest)===null||m===void 0||(f=m.favoriteStickers)===null||f===void 0?void 0:f.stickerIds;if(!A||!e)return;const l=!!F?.find(function(t){return t===e.id}),B=`https://discord.com/stickers/${e.id}.png`;A.children[1]=React.createElement(React.Fragment,null,Object.values(k.getGuilds()).find(function(t){return t.id===e.guild_id})&&React.createElement(o.Button,{text:l?"Remove from Favorites":"Add to Favorites",color:l?"red":"brand",style:s,size:"small",onPress:function(){return l?p.unfavoriteSticker(e.id):p.favoriteSticker(e.id),d(),r.showToast(l?"Removed from Favorites":"Added to Favorites",a.getAssetIDByName("Check"))}}),React.createElement(o.Button,{text:"Copy ID to clipboard",color:"brand",size:"small",style:s,onPress:function(){return S.clipboard.setString(e.id),d(),r.showToast(`Copied ${e.name}'s ID to clipboard`,a.getAssetIDByName("ic_copy_message_link"))}}),React.createElement(o.Button,{text:"Copy URL to clipboard",color:"brand",size:"small",style:s,onPress:function(){return S.clipboard.setString(B),d(),r.showToast(`Copied ${e.name}'s URL to clipboard`,a.getAssetIDByName("ic_copy_message_link"))}}),React.createElement(o.Button,{text:"Save image",color:"brand",size:"small",style:s,onPress:function(){return I(B,0),d(),r.showToast(`Saved ${e.name}'s image`,a.getAssetIDByName("toast_image_saved"))}}))}),w=function(){return _()};return g.onUnload=w,g})({},vendetta.patcher,vendetta.metro,vendetta.utils,vendetta.ui.components,vendetta.ui.toasts,vendetta.ui.assets,vendetta.metro.common);
