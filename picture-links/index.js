(function(l,a,f,h){"use strict";const{Pressable:g}=a.findByProps("Button","Text","View"),v=a.findByName("ProfileBanner",!1),y=a.findByName("HeaderAvatar",!1),{openMediaModal:m}=a.findByProps("openMediaModal"),{hideActionSheet:b}=a.findByProps("hideActionSheet"),{getChannelId:S}=a.findByStoreName("SelectedChannelStore"),{getGuildId:B}=a.findByStoreName("SelectedGuildStore");function w(n){return new Promise(function(t,e){h.ReactNative.Image.getSize(n,function(i,r){return t({width:i,height:r})},function(i){return e(i)})})}async function o(n,t){const{width:e,height:i}=await w(n);b(),m({initialSources:[{uri:n,sourceURI:n,width:e,height:i,guildId:B(),channelId:S()}],initialIndex:0,originLayout:{width:0,height:0,x:t.pageX,y:t.pageY,resizeMode:"fill"}})}const I=f.after("default",y,function(n,t){let[{user:e,style:i,guildId:r}]=n;var d="png";typeof e.guildMemberAvatars?.[r]=="string"&&e.guildMemberAvatars?.[r].includes("a_")&&(d="gif");const p=e.guildMemberAvatars?.[r]&&`https://cdn.discordapp.com/guilds/${r}/users/${e.id}/avatars/${e.guildMemberAvatars[r]}.${d}?size=4096`,u=e?.getAvatarURL?.(!1,4096,!0);if(!u)return t;const A=typeof u=="number"?`https://cdn.discordapp.com/embed/avatars/${Number(BigInt(e.id)>>22n)%6}.png`:u?.replace(".webp",".png");return delete t.props.style,React.createElement(g,{onPress:function(s){let{nativeEvent:c}=s;return o(A,c)},onLongPress:function(s){let{nativeEvent:c}=s;return p&&o(p,c)},style:i},t)}),M=f.after("default",v,function(n,t){let[{bannerSource:e}]=n;if(typeof e?.uri!="string"||!t)return t;const i=e.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return React.createElement(g,{onPress:function(r){let{nativeEvent:d}=r;return o(i,d)}},t)});function P(){I(),M()}return l.onUnload=P,l})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
