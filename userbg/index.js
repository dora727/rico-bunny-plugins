(function(t,h,B,D,R,c,e,a,d){"use strict";const{ScrollView:y}=d.General,{FormSection:v,FormRow:n}=d.Forms;function w(){return e.React.createElement(y,null,e.React.createElement(v,null,e.React.createElement(n,{label:"Discord Server",leading:e.React.createElement(n.Icon,{source:a.getAssetIDByName("Discord")}),trailing:n.Arrow,onPress:function(){return e.url.openDeeplink("https://discord.gg/TeRQEPb")}}),e.React.createElement(n,{label:"Reload DB",leading:e.React.createElement(n.Icon,{source:a.getAssetIDByName("ic_message_retry")}),onPress:async function(){return await o()?c.showToast("Reloaded DB",a.getAssetIDByName("check")):c.showToast("Failed to reload DB",a.getAssetIDByName("small"))}})))}const m=B.findByProps("default","getUserBannerURL");let r,u;const o=async function(){try{return r=await(await R.safeFetch("https://usrbg.is-hardly.online/users",{cache:"no-store"})).json(),r}catch(s){h.logger.error("Failed to fetch userBG data",s)}},b=async function(){if(await o(),!r)return c.showToast("Failed to load DB");const{endpoint:s,bucket:U,prefix:I,users:A}=r;u=D.after("getUserBannerURL",m,function($){let[f]=$;const g=Object.entries(A).find(function(i){let[l,p]=i;return l===f?.id});if(f?.banner===void 0&&g){const[i,l]=g;return`${s}/${U}/${I}${i}?${l}`}})},E=function(){return u?.()},F=w;return t.fetchData=o,t.onLoad=b,t.onUnload=E,t.settings=F,t})({},vendetta,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.assets,vendetta.ui.components);
