(function(t,h,B,D,R,o,e,a,u){"use strict";const{ScrollView:y}=u.General,{FormSection:v,FormRow:n}=u.Forms;function w(){return e.React.createElement(y,null,e.React.createElement(v,null,e.React.createElement(n,{label:"Discord Server",leading:e.React.createElement(n.Icon,{source:a.getAssetIDByName("Discord")}),trailing:n.Arrow,onPress:function(){return e.url.openDeeplink("https://discord.gg/TeRQEPb")}}),e.React.createElement(n,{label:"Reload DB",leading:e.React.createElement(n.Icon,{source:a.getAssetIDByName("ic_message_retry")}),onPress:async function(){return await c()?o.showToast("Reloaded DB",a.getAssetIDByName("check")):o.showToast("Failed to reload DB",a.getAssetIDByName("small"))}})))}const m=B.findByProps("default","getUserBannerURL");let r,d;const c=async function(){try{return r=await(await R.safeFetch("https://usrbg.is-hardly.online/users",{cache:"no-store"})).json(),r}catch(i){h.logger.error("Failed to fetch userBG data",i)}},b=async function(){if(await c(),!r)return o.showToast("Failed to load DB");const{endpoint:i,bucket:U,prefix:I,users:A}=r;d=D.after("getUserBannerURL",m,function($){let[f]=$;const g=Object.entries(A).find(function(s){let[l,p]=s;return l===f?.id});if(f?.banner===void 0&&g){const[s,l]=g;return`${i}/${U}/${I}${s}?${l}`}})},E=function(){return d?.()},F=w;return t.fetchData=c,t.onLoad=b,t.onUnload=E,t.settings=F,t})({},vendetta,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.assets,vendetta.ui.components);
