(function(o,l,c){"use strict";function f(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function h(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function p(n,e,i){return e&&h(n.prototype,e),i&&h(n,i),n}let d=function(){function n(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3e4;if(f(this,n),!e)throw new Error("No program to interpret.");this.program=e,this.input=i,this.size=t,this.array=new Array(t).fill(0),this.p=0,this.i=0,this.done=!1,this.events={},this.loops={},this.mod=function(a,s){return s+=1,(a%s+s)%s}}return p(n,[{key:"on",value:function(e,i){this.events[e]||(this.events[e]=[]),this.events[e].push(i)}},{key:"emit",value:function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),a=1;a<i;a++)t[a-1]=arguments[a];if(this.events[e])for(let s in this.events[e])this.events[e][s](...t)}},{key:"step",value:function(){let e=this.program,i=!1;if(this.done||e[this.i]===void 0){this.done||this.emit("done"),this.done=!0;return}switch(e[this.i]){case">":this.p++,this.p=this.mod(this.p,this.size);break;case"<":this.p--,this.p=this.mod(this.p,this.size);break;case"+":this.array[this.p]=this.array[this.p]+1&255;break;case"-":this.array[this.p]=this.array[this.p]-1&255;break;case".":if(!String.fromCharCode(this.array[this.p]))break;this.emit("out",String.fromCharCode(this.array[this.p]));break;case",":if(this.emit("in"),this.input[this.char]===void 0){this.array[this.p]=0;break}this.array[this.p]=this.input[this.char++].charCodeAt(0);break;case"[":let t=this.i,a=0;for(;;){if(t++,!e[t])throw new Error("Out of bounds.");if(e[t]==="["&&a++,this.program[t]==="]")if(a===0){this.array[this.p]===0?this.i=t:this.loops[t]=this.i;break}else a--}break;case"]":this.array[this.p]!==0?this.i=this.loops[this.i]:this.loops[this.i];break;default:i=!0}i||this.emit("tick"),this.i++}},{key:"init",value:function(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1e3;const t=function(){for(let a=0;a<i;a++)e.step();e.done||requestAnimationFrame(t)};t()}}]),n}();const{sendBotMessage:m}=c.findByProps("sendBotMessage");let u;var y={onLoad:function(){u=l.registerCommand({name:"bfeval",displayName:"bfeval",displayDescription:"Evaluate brainfuck code.",description:"Evaluate brainfuck code.",options:[{name:"code",description:"Code to evaluate.",type:3,required:!0,displayName:"code",displayDescription:"Code to evaluate."},{name:"ephemeral",displayName:"ephemeral",description:"Make outputs only be seen by you (default: true)",displayDescription:"Make outputs only be seen by you (default: true)",type:5,required:!1}],execute:v,applicationId:"-1",inputType:1,type:1})},onUnload:function(){u()}};async function v(n,e){const i=new Map(n.map(function(r){return[r.name,r]})),t=i.get("code").value,a=new d(t);let s="";if(a.on("out",function(r){return s+=r}),a.init(),i.get("ephemeral")?.value===!1)return{content:s};m(e.channel.id,s)}return o.default=y,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.commands,vendetta.metro);
