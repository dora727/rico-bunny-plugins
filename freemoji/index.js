(function(s,e,r,i,j,c,h,g){"use strict";const y=r.findByProps("canUseEmojisEverywhere");var E=[i.instead("canUseEmojisEverywhere",y,function(){return!0}),i.instead("canUseAnimatedEmojis",y,function(){return!0})];const{getCustomEmojiById:b}=r.findByStoreName("EmojiStore"),{getGuildId:R}=r.findByStoreName("SelectedGuildStore"),$=/<a?:(\w+):(\d+)>/i;function w(t,n){const o=t.matchAll(/<a?:(\w+):(\d+)>/gi),l=[];for(const a of o){const u=b(a[2]);if(u.guildId!=R()||u.animated){t=t.replace(a[0],"");var f="webp";u.animated&&(f="gif"),e.storage.hyperlink===!0?l.push(`[${a[1]}](https://cdn.discordapp.com/emojis/${a[2]}.${f}?size=${n}&quality=lossless&name=${a[1]})`):l.push(`https://cdn.discordapp.com/emojis/${a[2]}.${f}?size=${n}`)}}return{newContent:t.trim(),extractedEmojis:l}}function v(t){if(!t.content.match($)||!e.storage.forceMoji&&e.storage.haveNitro)return;const{newContent:n,extractedEmojis:o}=w(t.content,e.storage.emojiSize);t.content=n,o.length>0&&(e.storage.hyperlink===!0?t.content+=" "+o.join(" "):t.content+=`
`+o.join(`
`)),t.invalidEmojis=[]}const z=r.findByProps("sendMessage","receiveMessage"),F=r.findByProps("uploadLocalFiles");var k=[i.before("sendMessage",z,function(t){return v(t[1])}),i.before("uploadLocalFiles",F,function(t){return v(t[0].parsedMessage)})];const{FormSection:m,FormRadioRow:p,FormSwitchRow:S}=c.Forms,B={Tiny:16,Small:32,Medium:48,Large:64,Huge:96,Jumbo:128},M="https://cdn.discordapp.com/emojis/926602689213767680.webp";function I(){return h.useProxy(e.storage),React.createElement(j.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(m,{title:"Settings",titleStyleType:"no_border"},React.createElement(S,{label:"Hyperlink emoji",subLabel:"Hyperlinks emoji link to be less distractive",leading:React.createElement(c.Forms.FormIcon,{source:g.getAssetIDByName("ic_link")}),value:e.storage.hyperlink,onValueChange:function(){e.storage.hyperlink=!e.storage.hyperlink},note:""}),React.createElement(S,{label:"Force Freemoji",subLabel:"Explicitly force Freemoji even if you have nitro (useful for testing)",leading:React.createElement(c.Forms.FormIcon,{source:g.getAssetIDByName("img_nitro_emojis")}),value:e.storage.forceMoji,onValueChange:function(){e.storage.forceMoji=!e.storage.forceMoji},note:""})),React.createElement(m,{title:"Emoji Size"},Object.entries(B).map(function(t){let[n,o]=t;return React.createElement(p,{label:n,subLabel:o,selected:e.storage.emojiSize===o,onPress:function(){e.storage.emojiSize=o}})})),React.createElement(m,{title:"Preview"},React.createElement(j.ReactNative.Image,{source:{uri:`${M}?size=${e.storage.emojiSize}`,width:e.storage.emojiSize,height:e.storage.emojiSize}})))}var d;e.storage.emojiSize??=48,e.storage.hyperlink??=!0,e.storage.haveNitro??=((d=r.findByStoreName("UserStore").getCurrentUser())===null||d===void 0?void 0:d.premiumType)!==null,e.storage.forceMoji??=!1,typeof e.storage.emojiSize=="string"&&(e.storage.emojiSize=parseInt(e.storage.emojiSize));const N=[...E,...k],C=function(){return N.forEach(function(t){return t()})};return s.onUnload=C,s.settings=I,s})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.ui.assets);
